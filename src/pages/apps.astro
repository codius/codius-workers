---
import { AppForm } from "../components/AppForm"
import UserAppsTable from "../components/UserAppsTable.astro"
import Logout from "../components/Logout.astro"
import Layout from "../layouts/Layout.astro"
import { getSession } from "auth-astro/server"

const session = await getSession(Astro.request)

if (!session) {
  return Astro.redirect("/")
}
---

<Layout title="Welcome to Codius.">
  <main>
    <Logout />
    <AppForm client:load />
    <UserAppsTable />
  </main>
</Layout>
