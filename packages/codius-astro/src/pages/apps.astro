---
import { AppForm } from "@/components/AppForm"
import UserAppsTable from "@/components/UserAppsTable.astro"
import Layout from "@/layouts/Layout.astro"

const { userId } = Astro.locals.auth()
if (!userId) {
  return Astro.redirect("/")
}
---

<Layout>
  <main>
    <AppForm client:load />
    <UserAppsTable
      userId={userId}
      dispatcherHostname={Astro.locals.runtime.env.DISPATHER_HOSTNAME}
    />
  </main>
</Layout>
